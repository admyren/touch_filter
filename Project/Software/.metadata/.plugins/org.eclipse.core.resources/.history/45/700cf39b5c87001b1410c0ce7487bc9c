/**
  ******************************************************************************
  * @file    main.c
  * @author  Ac6
  * @version V1.0
  * @date    01-December-2013
  * @brief   Default main function.
  ******************************************************************************
*/


#include "stm32f4xx.h"
#include "gpio.h"
#include "rcc.h"

#define DELAY_COUNT 1000000

volatile uint32_t count;

void gpio_config(void)
{
   gpio_config_t gpio_conf;

   RCC->AHB1ENR |= (1 << 2);

   gpio_conf.mode = gpio_gpo;
   gpio_conf.output_type = gpio_opp;
   gpio_conf.output_speed = gpio_hs;
   gpio_conf.pull_up_down = gpio_no_pull;
   gpio_conf.alternate_func = gpio_af_0;
   gpio_conf.lock = gpio_lock_off;
   gpio_conf.pins = gpio_pin_2 | gpio_pin_3;

   gpio_init(GPIOC, gpio_conf);
}


int main(void)
{
   gpio_config();

	while(1)
	{
	   for(count=0; count<DELAY_COUNT; count++);
	   gpio_pin_set(GPIOC, gpio_pin_2 | gpio_pin_3);
      for(count=0; count<DELAY_COUNT; count++);
      gpio_pin_reset(GPIOC, gpio_pin_2 | gpio_pin_3);
	}
}
